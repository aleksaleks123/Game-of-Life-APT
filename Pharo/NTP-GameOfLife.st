Morph subclass: #GameOfLife	instanceVariableNames: 'rows columns mesh nextMesh statements'	classVariableNames: ''	package: 'NTP-GameOfLife'!!GameOfLife methodsFor: 'accessing' stamp: 'AleksandarNedakovic 7/12/2020 18:04'!rows: r columns: c	mesh := Array2D rows: r columns: c.	nextMesh := Array2D rows: r columns: c.	rows := r.	columns := c.	self randomiseMesh! !!GameOfLife methodsFor: 'accessing' stamp: 'AleksandarNedakovic 7/12/2020 18:05'!randomiseMesh	1 to: rows do: [ :i |		1 to: columns do: [ :j |				mesh at: i at: j put: (0 to: 1) atRandom 			]		].	^ self		! !!GameOfLife methodsFor: 'update' stamp: 'AleksandarNedakovic 7/12/2020 17:09'!updateCellRow: cellRow updateCellColumn: cellColumn	|neighbourCount|	neighbourCount:= self neighboursOfCellRow: cellRow neighboursOfCellColumn: cellColumn.	(mesh at: cellRow at: cellColumn) = 1 	 ifTrue: [ (neighbourCount = 2) | (neighbourCount = 3)		 ifTrue: [ nextMesh at:cellRow at:cellColumn put:1 ]		 ifFalse: [ nextMesh at:cellRow at:cellColumn put:0 ]]	 ifFalse: [ neighbourCount = 3		 ifTrue: [ nextMesh at:cellRow at:cellColumn put:1 ]		 ifFalse: [ nextMesh at:cellRow at:cellColumn put:0 ]]! !!GameOfLife methodsFor: 'update' stamp: 'AleksandarNedakovic 7/12/2020 18:05'!updateMesh	1 to: rows do: [ :i |		1 to: columns do: [ :j |				self updateCellRow: i updateCellColumn: j			]		].	mesh := nextMesh.	self changed.	^ self! !!GameOfLife methodsFor: 'update' stamp: 'AleksandarNedakovic 7/12/2020 18:05'!neighboursOfCellRow: i neighboursOfCellColumn: j	| retval |	retval := 0.	-1 to: 1 do: [ :x | 		-1 to: 1 do: [ :y | 			(x ~= 0) | (y ~= 0) ifTrue:[(mesh at: i-1+x%rows+1 at:j-1+y%columns+1)=1 ifTrue:[ retval := retval + 1]]			]		].	^ retval! !!GameOfLife methodsFor: 'stepping' stamp: 'AleksandarNedakovic 7/12/2020 14:48'!stepTime    ^ 500.! !!GameOfLife methodsFor: 'drawing' stamp: 'AleksandarNedakovic 7/12/2020 18:12'!drawOn: canvas	| rectangle cellWidth cellHeight cellValue |	cellWidth := self width  / columns.	cellHeight := self height / rows.	0 to: (rows-1) do: [ :i |		0 to: (columns-1) do: [ :j |				rectangle := Rectangle left: self bounds left + (cellWidth *j)   				right: self bounds left + (cellWidth *j) + cellWidth 				top: self bounds top + (cellHeight *i)   				bottom: self bounds top + (cellHeight *i) + cellHeight.				cellValue := mesh at: i+1 at: j+1.				cellValue = 1 ifTrue: [canvas frameAndFillRectangle: rectangle 			      fillColor:  (Color black)  borderWidth: 1  borderColor: (Color white)]				ifFalse: [canvas frameAndFillRectangle: rectangle fillColor: 					 (Color white) borderWidth: 1 borderColor: (Color black)].			 ] ]! !!GameOfLife methodsFor: 'stepping and presenter' stamp: 'AleksandarNedakovic 7/12/2020 16:47'!step	self updateMesh! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!GameOfLife class	instanceVariableNames: ''!!GameOfLife class methodsFor: 'accessing' stamp: 'AleksandarNedakovic 7/12/2020 18:07'!rows: r columns: c	"comment stating purpose of class-side message"	"scope: class-variables  &  class-instance-variables"					^ GameOfLife new rows: r columns:c ! !!GameOfLife class methodsFor: 'accessing' stamp: 'AleksandarNedakovic 7/12/2020 16:24'!size: n	"comment stating purpose of class-side message"	"scope: class-variables  &  class-instance-variables"					^ GameOfLife new size: n! !